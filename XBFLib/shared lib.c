#include "shared lib.h"#include "XBlockFile.h"long	OpenBlockFile( char* fPath ){	XBlockFile*		vFile = NULL;		try {		vFile = new XBlockFile( fPath );		vFile->Open(true);	}	catch( ... )	{	}		return((long) vFile );}bool	CloseBlockFile( long fileRef ){	XBlockFile*		vFile = (XBlockFile*) fileRef;		try {		vFile->Close();	}	catch( ... )	{		return false;	}		return true;}bool	CompactBlockFile( long fileRef ){	XBlockFile*		vFile = (XBlockFile*) fileRef;		try {		vFile->Compact();	}	catch( ... )	{		return false;	}		return true;}long	GetRootBlockRef( long fileRef, long blockID ){	XBlockFile*		vFile = (XBlockFile*) fileRef;	XBlockEntry*	vBlock = NULL;		try {		vBlock = vFile->GetBlockEntry( blockID );	}	catch( ... )	{	}		return((long) vBlock);}void	WriteRootBlock( long fileRef, long blockID, void* inData, long inLength ){	XBlockFile*		vFile = (XBlockFile*) fileRef;	XBlockEntry*	vBlock = NULL;		try {		vFile->SetBlock( blockID, inData, inLength );	}	catch( ... )	{	}}long	GetSubBlockRef( long fileRef, long blockRef, long blockID ){	XBlockFile*		vFile = (XBlockFile*) fileRef;	XBlockEntry*	vSrcBlock = (XBlockEntry*) blockRef,					*vBlock = NULL;		try {		vBlock = vSrcBlock->GetBlockEntry( blockID );	}	catch( ... )	{	}		return((long) vBlock);}long	WriteSubBlock( long fileRef, long blockRef, long blockID, void* inData, long inLength ){	XBlockFile*		vFile = (XBlockFile*) fileRef;	XBlockEntry*	vSrcBlock = (XBlockEntry*) blockRef,					*vBlock = NULL;		try {		vBlock = vFile->AddSubBlock( vSrcBlock, blockID, inData, inLength );	}	catch( ... )	{	}		return((long) vBlock);}void	GetBlockData( long fileRef, long blockRef, void** outData, long* outLength ){	XBlockFile*		vFile = (XBlockFile*) fileRef;	XBlockEntry*	vSrcBlock = (XBlockEntry*) blockRef;	(*outData) = NULL;	(*outLength) = 0;		try {		(*outData) = vFile->GetBlockData( vSrcBlock );		(*outLength) = vSrcBlock->GetLength();	}	catch( ... )	{	}}void	DeleteBlock( long fileRef, long blockRef ){	XBlockFile*		vFile = (XBlockFile*) fileRef;	XBlockEntry*	vSrcBlock = (XBlockEntry*) blockRef;		try {		vFile->KillBlockEntry( vSrcBlock );	}	catch( ... )	{	}}